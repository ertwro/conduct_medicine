{"version":3,"file":"EASICalculator-legacy-BbYwJ8dg.js","sources":["../../src/apps/dermatology/EASICalculator.js"],"sourcesContent":["// src/apps/dermatology/EASICalculator.js - EASI (Eczema Area and Severity Index) Calculator\nimport { BaseInteractiveApp } from '../shared/BaseInteractiveApp.js';\n\nexport class EASICalculator extends BaseInteractiveApp {\n  constructor(containerId) {\n    super(containerId, {\n      title: 'EASI - Eczema Area and Severity Index',\n      specialty: 'dermatology',\n      description: 'Assess atopic dermatitis severity and affected body surface area',\n      showResults: true,\n      allowExport: true\n    });\n\n    this.bodyRegions = [\n      { key: 'head', label: 'Head/Neck', maxArea: 0.1 },\n      { key: 'trunk', label: 'Trunk', maxArea: 0.3 },\n      { key: 'upperLimbs', label: 'Upper Limbs', maxArea: 0.2 },\n      { key: 'lowerLimbs', label: 'Lower Limbs', maxArea: 0.4 }\n    ];\n\n    this.severityScores = [\n      { value: 0, label: '0 - None' },\n      { value: 1, label: '1 - Mild' },\n      { value: 2, label: '2 - Moderate' },\n      { value: 3, label: '3 - Severe' }\n    ];\n\n    this.areaScores = [\n      { value: 0, label: '0 - No eruption (0%)' },\n      { value: 1, label: '1 - <10% of region affected' },\n      { value: 2, label: '2 - 10-29% of region affected' },\n      { value: 3, label: '3 - 30-49% of region affected' },\n      { value: 4, label: '4 - 50-69% of region affected' },\n      { value: 5, label: '5 - 70-89% of region affected' },\n      { value: 6, label: '6 - 90-100% of region affected' }\n    ];\n  }\n\n  async initializeApp() {\n    const formContainer = this.container.querySelector('.app-form');\n    \n    formContainer.innerHTML = `\n      <div class=\"easi-form\">\n        <div class=\"form-intro\">\n          <p class=\"text-sm text-gray-300 mb-4\">\n            Assess the severity of atopic dermatitis by evaluating four clinical signs in each body region \n            and the percentage of affected area. Total possible score: 72 points.\n          </p>\n        </div>\n        \n        <div class=\"body-regions\">\n          ${this.bodyRegions.map(region => this.createRegionForm(region)).join('')}\n        </div>\n        \n        <div class=\"form-actions mt-6\">\n          <button type=\"button\" class=\"calculate-btn bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold\">\n            Calculate EASI Score\n          </button>\n        </div>\n        \n        <div class=\"easi-reference mt-6 p-4 bg-gray-800 rounded-lg\">\n          <h5 class=\"font-semibold text-gray-200 mb-2\">Assessment Guide:</h5>\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n            <div>\n              <h6 class=\"font-semibold text-gray-300\">Clinical Signs:</h6>\n              <ul class=\"text-gray-400 space-y-1\">\n                <li>• Erythema (redness)</li>\n                <li>• Infiltration/Papulation (thickness)</li>\n                <li>• Excoriation (scratching marks)</li>\n                <li>• Lichenification (skin thickening)</li>\n              </ul>\n            </div>\n            <div>\n              <h6 class=\"font-semibold text-gray-300\">Severity Scale:</h6>\n              <ul class=\"text-gray-400 space-y-1\">\n                <li>• 0 = Absent</li>\n                <li>• 1 = Mild</li>\n                <li>• 2 = Moderate</li>\n                <li>• 3 = Severe</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n\n    // Add calculate button event listener\n    const calculateBtn = this.container.querySelector('.calculate-btn');\n    calculateBtn.addEventListener('click', () => this.calculate());\n  }\n\n  createRegionForm(region) {\n    return `\n      <div class=\"region-form bg-gray-700 p-4 rounded-lg mb-4\">\n        <h4 class=\"text-lg font-semibold text-gray-200 mb-4\">\n          ${region.label} (${Math.round(region.maxArea * 100)}% of body surface)\n        </h4>\n        \n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div class=\"severity-assessment\">\n            <h5 class=\"font-semibold text-gray-300 mb-3\">Clinical Signs Severity (0-3 each):</h5>\n            \n            ${this.createFormField({\n              type: 'select',\n              name: `${region.key}_erythema`,\n              label: 'Erythema (Redness)',\n              required: true,\n              options: this.severityScores\n            })}\n            \n            ${this.createFormField({\n              type: 'select',\n              name: `${region.key}_infiltration`,\n              label: 'Infiltration/Papulation (Thickness)',\n              required: true,\n              options: this.severityScores\n            })}\n            \n            ${this.createFormField({\n              type: 'select',\n              name: `${region.key}_excoriation`,\n              label: 'Excoriation (Scratching)',\n              required: true,\n              options: this.severityScores\n            })}\n            \n            ${this.createFormField({\n              type: 'select',\n              name: `${region.key}_lichenification`,\n              label: 'Lichenification (Thickening)',\n              required: true,\n              options: this.severityScores\n            })}\n          </div>\n          \n          <div class=\"area-assessment\">\n            <h5 class=\"font-semibold text-gray-300 mb-3\">Affected Area (0-6):</h5>\n            \n            ${this.createFormField({\n              type: 'select',\n              name: `${region.key}_area`,\n              label: 'Percentage of Region Affected',\n              required: true,\n              options: this.areaScores\n            })}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  calculate() {\n    // Get form data\n    this.data = this.getFormData();\n    \n    // Validate required fields\n    const requiredFields = [];\n    this.bodyRegions.forEach(region => {\n      requiredFields.push(\n        `${region.key}_erythema`,\n        `${region.key}_infiltration`,\n        `${region.key}_excoriation`,\n        `${region.key}_lichenification`,\n        `${region.key}_area`\n      );\n    });\n    \n    const missing = this.validateRequired(requiredFields);\n    if (missing.length > 0) {\n      this.showError(`Please complete all assessments for all body regions.`);\n      return;\n    }\n\n    // Calculate EASI score\n    let totalScore = 0;\n    const regionScores = {};\n\n    this.bodyRegions.forEach(region => {\n      const erythema = parseInt(this.data[`${region.key}_erythema`]) || 0;\n      const infiltration = parseInt(this.data[`${region.key}_infiltration`]) || 0;\n      const excoriation = parseInt(this.data[`${region.key}_excoriation`]) || 0;\n      const lichenification = parseInt(this.data[`${region.key}_lichenification`]) || 0;\n      const area = parseInt(this.data[`${region.key}_area`]) || 0;\n\n      // Sum of severity scores (max 12 per region)\n      const severitySum = erythema + infiltration + excoriation + lichenification;\n      \n      // Regional EASI score = Area × Severity Sum × Regional multiplier\n      const regionalScore = area * severitySum * region.maxArea;\n      \n      regionScores[region.key] = {\n        label: region.label,\n        erythema,\n        infiltration,\n        excoriation,\n        lichenification,\n        area,\n        severitySum,\n        regionalScore: Math.round(regionalScore * 100) / 100\n      };\n      \n      totalScore += regionalScore;\n    });\n\n    const easiScore = Math.round(totalScore * 100) / 100;\n    const { severity, interpretation, recommendation } = this.interpretEASIScore(easiScore);\n\n    const results = {\n      easiScore,\n      severity,\n      interpretation,\n      recommendation,\n      regionScores\n    };\n\n    this.showResults(results);\n  }\n\n  interpretEASIScore(score) {\n    if (score <= 7) {\n      return {\n        severity: 'Mild',\n        interpretation: 'Mild atopic dermatitis with limited impact on quality of life',\n        recommendation: 'Topical therapy (low-medium potency corticosteroids, calcineurin inhibitors). Focus on skin barrier restoration and trigger avoidance.'\n      };\n    } else if (score <= 21) {\n      return {\n        severity: 'Moderate',\n        interpretation: 'Moderate atopic dermatitis requiring more intensive management',\n        recommendation: 'Optimize topical therapy, consider phototherapy or systemic therapy if inadequate response. Regular follow-up needed.'\n      };\n    } else if (score <= 50) {\n      return {\n        severity: 'Severe',\n        interpretation: 'Severe atopic dermatitis significantly impacting quality of life',\n        recommendation: 'Systemic therapy indicated (dupilumab, JAK inhibitors, or traditional immunosuppressants). Specialist dermatology consultation recommended.'\n      };\n    } else {\n      return {\n        severity: 'Very Severe',\n        interpretation: 'Very severe atopic dermatitis with extensive disease burden',\n        recommendation: 'Urgent specialist consultation required. Consider hospitalization for severe cases. Aggressive systemic therapy and comprehensive management approach needed.'\n      };\n    }\n  }\n\n  formatResults(results) {\n    return `\n      <div class=\"easi-results\">\n        <div class=\"results-header text-center mb-6\">\n          <h4 class=\"text-3xl font-bold text-green-400\">EASI Score: ${results.easiScore}</h4>\n          <div class=\"severity-badge mt-2\">\n            <span class=\"inline-block bg-green-600 text-white px-4 py-2 rounded-full text-lg font-semibold\">\n              ${results.severity} Atopic Dermatitis\n            </span>\n          </div>\n        </div>\n        \n        <div class=\"results-content\">\n          <div class=\"interpretation bg-gray-700 p-4 rounded-lg mb-4\">\n            <h5 class=\"font-semibold text-gray-200 mb-2\">Clinical Interpretation</h5>\n            <p class=\"text-gray-300\">${results.interpretation}</p>\n          </div>\n          \n          <div class=\"recommendation bg-green-900 p-4 rounded-lg mb-4\">\n            <h5 class=\"font-semibold text-green-200 mb-2\">Treatment Recommendation</h5>\n            <p class=\"text-green-100\">${results.recommendation}</p>\n          </div>\n          \n          <div class=\"regional-breakdown\">\n            <h5 class=\"font-semibold text-gray-200 mb-3\">Regional Breakdown</h5>\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              ${Object.entries(results.regionScores).map(([key, region]) => `\n                <div class=\"region-card bg-gray-800 p-3 rounded\">\n                  <h6 class=\"font-semibold text-gray-200\">${region.label}</h6>\n                  <div class=\"text-sm text-gray-300 space-y-1\">\n                    <p>Regional Score: <span class=\"font-medium\">${region.regionalScore}</span></p>\n                    <p>Area Score: ${region.area}/6</p>\n                    <p>Severity Sum: ${region.severitySum}/12</p>\n                    <div class=\"text-xs text-gray-400 mt-2\">\n                      E:${region.erythema} I:${region.infiltration} Ex:${region.excoriation} L:${region.lichenification}\n                    </div>\n                  </div>\n                </div>\n              `).join('')}\n            </div>\n          </div>\n          \n          <div class=\"score-interpretation mt-6 text-sm text-gray-400\">\n            <h6 class=\"font-semibold text-gray-300 mb-2\">EASI Score Categories:</h6>\n            <ul class=\"space-y-1\">\n              <li>• 0-7: Mild atopic dermatitis</li>\n              <li>• 7.1-21: Moderate atopic dermatitis</li>\n              <li>• 21.1-50: Severe atopic dermatitis</li>\n              <li>• 50.1-72: Very severe atopic dermatitis</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  onReset() {\n    console.log('EASI Calculator reset');\n  }\n}"],"names":["exports","BaseInteractiveApp","constructor","containerId","super","title","specialty","description","showResults","allowExport","this","bodyRegions","key","label","maxArea","severityScores","value","areaScores","initializeApp","container","querySelector","innerHTML","map","region","createRegionForm","join","addEventListener","calculate","Math","round","createFormField","type","name","required","options","data","getFormData","requiredFields","forEach","push","validateRequired","length","showError","totalScore","regionScores","erythema","parseInt","infiltration","excoriation","lichenification","area","severitySum","regionalScore","easiScore","severity","interpretation","recommendation","interpretEASIScore","results","score","formatResults","Object","entries","onReset","console","log"],"mappings":"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"}