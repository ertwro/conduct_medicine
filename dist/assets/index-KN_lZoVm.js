const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MidasCalculator-hr8mXpzH.js","assets/BaseInteractiveApp-Cyp2fbo_.js","assets/EASICalculator-bPRzwWXF.js"])))=>i.map(i=>d[i]);
function __vite_legacy_guard(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}import{m as marked,p as purify}from"./vendor-CfY5IvzE.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class Router{constructor(){this.routes=new Map,this.currentRoute=null}addRoute(e,t){this.routes.set(e,{pattern:e,handler:t,regex:this.patternToRegex(e)})}patternToRegex(e){const t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/:(\w+)/g,"(?<$1>[^/]+)");return new RegExp("^".concat(t,"$"))}navigate(e){e.startsWith("/")||(e="/"+e),window.location.pathname+window.location.search!==e&&window.history.pushState(null,"",e),this.handleRoute(e)}handleRoute(e=window.location.pathname){e.startsWith("/")||(e="/"+e);const t="/conduct_medicine";e.startsWith(t)&&(e=e.slice(17)||"/"),console.log("üîó Routing to: ".concat(e));for(const[n,o]of this.routes){const t=e.match(o.regex);if(t){this.currentRoute=n;const s=t.groups||{};try{return o.handler(s),void this.updateActiveNavigation(e)}catch(a){console.error("Error handling route ".concat(n,":"),a)}}}console.warn("No route found for: ".concat(e)),this.handle404()}updateActiveNavigation(e){document.querySelectorAll(".nav-link-active, .nav-category-active").forEach(e=>{e.classList.remove("nav-link-active","nav-category-active")});document.querySelectorAll("a[href]").forEach(t=>{const a=t.getAttribute("href");if(a===e||e.startsWith(a)&&"/"!==a){t.classList.add("nav-link-active");const e=t.closest(".nav-category");e&&e.classList.add("nav-category-active")}})}handle404(){const e=document.querySelector(".actual-main-content");e&&(e.innerHTML='\n        <h2 class="text-2xl font-semibold mb-4 text-gray-100">Page Not Found</h2>\n        <p class="mb-4">The requested page could not be found.</p>\n        <a href="/" class="text-sky-400 hover:text-sky-300">‚Üê Return to Home</a>\n      ')}getCurrentRoute(){return this.currentRoute}buildUrl(e){return"/conduct_medicine/"+e.replace(/^\//,"")}}class ComponentLoader{constructor(){this.cache=new Map,this.loadingPromises=new Map}async loadPartial(e,t=!0){if(t&&this.cache.has(e))return this.cache.get(e);if(this.loadingPromises.has(e))return this.loadingPromises.get(e);const a=this.fetchPartial(e);this.loadingPromises.set(e,a);try{const n=await a;return t&&this.cache.set(e,n),this.loadingPromises.delete(e),n}catch(n){throw this.loadingPromises.delete(e),n}}async fetchPartial(e){try{const t=await fetch(e);if(!t.ok)throw new Error("HTTP ".concat(t.status,": ").concat(t.statusText));const a=await t.text();return a.trim()?a:(console.warn("Partial ".concat(e," is empty")),"")}catch(t){return console.error("Failed to load partial ".concat(e,":"),t),e.includes("_header")?this.getHeaderFallback():e.includes("_navigation_shell")?this.getNavigationFallback():e.includes("_footer")?this.getFooterFallback():'<div class="error-placeholder">Failed to load '.concat(e,"</div>")}}getHeaderFallback(){return'\n      <header class="site-header">\n        <div class="header-content">\n          <h1 class="site-title">Conduct Based Medicine</h1>\n          <div class="header-controls">\n            <input type="text" id="search-input" placeholder="Search..." class="search-input">\n            <button id="translate-button" class="translate-button">ES</button>\n            <button id="mobile-nav-toggle" class="mobile-nav-toggle">‚ò∞</button>\n          </div>\n        </div>\n        <div id="search-results-preview" class="search-results-preview"></div>\n      </header>\n    '}getNavigationFallback(){return'\n      <aside class="site-navigation-panel">\n        <nav class="navigation-content">\n          <p class="text-gray-400 p-4">Navigation loading...</p>\n        </nav>\n      </aside>\n    '}getFooterFallback(){return'\n      <footer class="site-footer">\n        <p>&copy; '.concat((new Date).getFullYear()," JP Silva. All rights reserved.</p>\n      </footer>\n    ")}async loadJSON(e,t=!0){if(t&&this.cache.has(e))return this.cache.get(e);try{const a=await fetch(e);if(!a.ok)throw new Error("HTTP ".concat(a.status,": ").concat(a.statusText));const n=await a.json();return t&&this.cache.set(e,n),n}catch(a){throw console.error("Failed to load JSON ".concat(e,":"),a),a}}async loadMarkdown(e,t=!0){if(t&&this.cache.has(e))return this.cache.get(e);try{const a=await fetch(e);if(!a.ok)throw new Error("HTTP ".concat(a.status,": ").concat(a.statusText));const n=await a.text();return t&&this.cache.set(e,n),n}catch(a){throw console.error("Failed to load Markdown ".concat(e,":"),a),a}}clearCache(e=null){e?this.cache.delete(e):this.cache.clear()}getCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}}class LanguageManager{constructor(){this.currentLanguage="en",this.supportedLanguages=["en","es"],this.translations=new Map,this.observers=new Set}async init(){const e=localStorage.getItem("preferredLanguage");e&&this.supportedLanguages.includes(e)&&(this.currentLanguage=e),window.currentLanguage=this.currentLanguage,await this.loadCoreTranslations(),this.applyTranslations()}async loadCoreTranslations(){const e={en:{searchPlaceholder:"Search medical content...",switchToSpanish:"Switch to Spanish",loadingPresentation:"Loading presentation...",noResults:"No results found",searchResults:"Search Results",footer_copyright:"¬© ".concat((new Date).getFullYear()," JP Silva. All rights reserved."),supportModalTitle:"Support Our Medical Education Platform",supportModalDescription:"Help us maintain and expand this clinical decision support tool.",buyMeCoffee:"‚òï Buy me a coffee",close:"Close",pageNotFound:"Page Not Found",returnHome:"‚Üê Return to Home",loading:"Loading...",error:"Error"},es:{searchPlaceholder:"Buscar contenido m√©dico...",switchToSpanish:"Cambiar a Ingl√©s",loadingPresentation:"Cargando presentaci√≥n...",noResults:"No se encontraron resultados",searchResults:"Resultados de B√∫squeda",footer_copyright:"¬© ".concat((new Date).getFullYear()," JP Silva. Todos los derechos reservados."),supportModalTitle:"Apoya Nuestra Plataforma de Educaci√≥n M√©dica",supportModalDescription:"Ay√∫danos a mantener y expandir esta herramienta de apoyo a decisiones cl√≠nicas.",buyMeCoffee:"‚òï Inv√≠tame un caf√©",close:"Cerrar",pageNotFound:"P√°gina No Encontrada",returnHome:"‚Üê Volver al Inicio",loading:"Cargando...",error:"Error"}};this.translations.set("core",e),window.translations=e}getCurrentLanguage(){return this.currentLanguage}getSupportedLanguages(){return[...this.supportedLanguages]}async setLanguage(e){return this.supportedLanguages.includes(e)?(this.currentLanguage===e||(this.currentLanguage=e,window.currentLanguage=e,localStorage.setItem("preferredLanguage",e),this.applyTranslations(),this.notifyObservers(),window.app&&"function"==typeof window.app.reloadCurrentSpecialtyNavigation&&window.app.reloadCurrentSpecialtyNavigation()),!0):(console.warn("Language ".concat(e," not supported")),!1)}toggleLanguage(){const e="en"===this.currentLanguage?"es":"en";return this.setLanguage(e)}applyTranslations(){const e=this.translations.get("core");if(!e||!e[this.currentLanguage])return;const t=e[this.currentLanguage],a=document.getElementById("search-input");a&&(a.placeholder=t.searchPlaceholder);const n=document.getElementById("translate-button");n&&(n.textContent="en"===this.currentLanguage?"ES":"EN",n.title=t.switchToSpanish);const o=document.getElementById("loading-indicator");o&&(o.textContent=t.loadingPresentation);const s=document.querySelector('[data-translate-key="footer_copyright"]');s&&(s.innerHTML=t.footer_copyright),document.querySelectorAll("[data-translate]").forEach(e=>{const a=e.getAttribute("data-translate");t[a]&&(e.textContent=t[a])})}translate(e,t="core",a=e){const n=this.translations.get(t);return n&&n[this.currentLanguage]&&n[this.currentLanguage][e]?n[this.currentLanguage][e]:"en"!==this.currentLanguage&&n&&n.en&&n.en[e]?n.en[e]:a}async loadSpecialtyTranslations(e){if(this.translations.has(e))return this.translations.get(e);try{const t=await fetch("assets/data/navigation-menu-".concat(e,".json")).then(e=>e.json());if(t.ui_strings)return this.translations.set(e,t.ui_strings),t.ui_strings}catch(t){console.warn("Could not load ".concat(e," translations:"),t)}return null}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}notifyObservers(){this.observers.forEach(e=>{try{e(this.currentLanguage)}catch(t){console.error("Error in language change observer:",t)}})}formatText(e,t={}){return e?(this.currentLanguage,t.capitalize?e.charAt(0).toUpperCase()+e.slice(1):e):""}getDirection(){return"ltr"}getLanguageDisplayName(e=this.currentLanguage){return{en:"English",es:"Espa√±ol"}[e]||e}}class SearchManager{constructor(){this.searchData=[],this.searchIndex=new Map,this.searchTimeout=null,this.selectedIndex=-1,this.minSearchLength=2,this.maxResults=10}async init(){await this.loadSearchData(),this.buildSearchIndex(),this.initializeSearchUI()}async loadSearchData(){try{if(window.sitePages&&Array.isArray(window.sitePages))return void(this.searchData=window.sitePages);const basePath="",response=await fetch("".concat(basePath,"/assets/js/search-data.js"));if(!response.ok)throw new Error("Failed to fetch search data: ".concat(response.status));const searchScript=await response.text(),match=searchScript.match(/const sitePages = (\[[\s\S]*?\]);/);if(!match)throw new Error("Could not find sitePages array in search-data.js");{let jsonStr=match[1];jsonStr=jsonStr.replace(/\/\/[^\n\r]*/g,"");try{this.searchData=JSON.parse(jsonStr)}catch(parseError){console.warn("Could not parse extracted JSON, trying eval approach");try{this.searchData=eval(match[1])}catch(evalError){throw new Error("Could not parse search data")}}}window.sitePages=this.searchData}catch(error){console.error("Failed to load search data:",error),this.searchData=[],window.sitePages=this.searchData}}buildSearchIndex(){this.searchIndex.clear(),this.searchData.forEach((e,t)=>{([e.title,e.description,e.keywords].join(" ").toLowerCase().match(/\b\w+\b/g)||[]).forEach(e=>{e.length>=2&&(this.searchIndex.has(e)||this.searchIndex.set(e,new Set),this.searchIndex.get(e).add(t))})})}initializeSearchUI(){const e=document.getElementById("search-input"),t=document.getElementById("search-results-preview");e&&t&&(e.addEventListener("input",e=>{clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.performSearch(e.target.value)},200)}),e.addEventListener("keydown",e=>{this.handleKeyDown(e,t)}),e.addEventListener("focus",()=>{e.value.trim()&&this.performSearch(e.value)}),document.addEventListener("click",a=>{e.contains(a.target)||t.contains(a.target)||this.hideResults()}))}performSearch(e){if(!document.getElementById("search-results-preview"))return;if(!e.trim()||e.length<this.minSearchLength)return void this.hideResults();const t=this.search(e);this.displayResults(t,e)}search(e){const t=e.toLowerCase().trim(),a=t.match(/\b\w+\b/g)||[];if(0===a.length)return[];const n=new Set;a.forEach(e=>{this.searchIndex.has(e)&&this.searchIndex.get(e).forEach(e=>{n.add(e)}),e.length>=3&&this.searchIndex.forEach((t,a)=>{a.startsWith(e)&&t.forEach(e=>{n.add(e)})})});return Array.from(n).map(e=>{const n=this.searchData[e],o=this.calculateRelevanceScore(n,t,a);return{...n,score:o,index:e}}).filter(e=>e.score>0).sort((e,t)=>t.score-e.score).slice(0,this.maxResults)}calculateRelevanceScore(e,t,a){let n=0;const o=[e.title,e.description,e.keywords].join(" ").toLowerCase();o.includes(t)&&(n+=100);const s=e.title.toLowerCase();s.includes(t)&&(n+=50),a.forEach(t=>{s.includes(t)&&(n+=20),e.description.toLowerCase().includes(t)&&(n+=10),e.keywords.toLowerCase().includes(t)&&(n+=15)});return["neurology","dermatology","diagnosis","treatment","management"].forEach(e=>{o.includes(e)&&t.includes(e)&&(n+=25)}),n}displayResults(e,t){var a;const n=document.getElementById("search-results-preview");if(!n)return;if(0===e.length){const e=null==(a=window.app)?void 0:a.languageManager,t=e?e.translate("noResults"):"No results found";return n.innerHTML='\n        <div class="search-result-item">\n          '.concat(this.escapeHTML(t),"\n        </div>\n      "),void(n.style.display="block")}const o=e.map((e,a)=>{const n=this.highlightSearchTerms(e.title,t),o=this.highlightSearchTerms(e.description,t);return'\n        <div class="search-result-item" data-index="'.concat(a,'" data-url="').concat(this.escapeHTML(e.url),'">\n          <div class="result-snippet-source">').concat(n,'</div>\n          <div class="result-snippet-description">').concat(o,'</div>\n          <div class="result-snippet-meta">\n            Score: ').concat(e.score," | Keywords: ").concat(this.escapeHTML(e.keywords),"\n          </div>\n        </div>\n      ")}).join("");n.innerHTML=o,n.style.display="block",this.selectedIndex=-1,n.querySelectorAll(".search-result-item").forEach(e=>{e.addEventListener("click",()=>{var t;const a=e.getAttribute("data-url");a&&(null==(t=window.app)?void 0:t.router)&&(this.hideResults(),window.app.router.navigate(a))})})}highlightSearchTerms(e,t){if(!t.trim()||"string"!=typeof e)return this.escapeHTML(e);const a=this.escapeHTML(e),n=t.toLowerCase().match(/\b\w+\b/g)||[];let o=a;return n.forEach(e=>{if(e.length>=2)try{const t=new RegExp("\\b(".concat(this.escapeRegex(e),")"),"gi");o=o.replace(t,'<mark class="search-preview-highlight">$1</mark>')}catch(t){console.warn("Error highlighting search term:",t)}}),o}handleKeyDown(e,t){var a;const n=t.querySelectorAll(".search-result-item");if("none"!==t.style.display&&0!==n.length)switch(e.key){case"ArrowDown":e.preventDefault(),this.selectedIndex=Math.min(this.selectedIndex+1,n.length-1),this.updateSelection(n);break;case"ArrowUp":e.preventDefault(),this.selectedIndex=Math.max(this.selectedIndex-1,0),this.updateSelection(n);break;case"Enter":if(e.preventDefault(),this.selectedIndex>=0&&n[this.selectedIndex]){const e=n[this.selectedIndex].getAttribute("data-url");e&&(null==(a=window.app)?void 0:a.router)&&(this.hideResults(),window.app.router.navigate(e))}break;case"Escape":this.hideResults(),e.target.blur()}}updateSelection(e){e.forEach((e,t)=>{e.classList.toggle("preview-item-selected",t===this.selectedIndex)})}hideResults(){const e=document.getElementById("search-results-preview");e&&(e.style.display="none"),this.selectedIndex=-1}addPage(e){const t=this.searchData.length;this.searchData.push(e);([e.title,e.description,e.keywords].join(" ").toLowerCase().match(/\b\w+\b/g)||[]).forEach(e=>{e.length>=2&&(this.searchIndex.has(e)||this.searchIndex.set(e,new Set),this.searchIndex.get(e).add(t))}),window.sitePages=this.searchData}escapeHTML(e){return"string"!=typeof e?"":e.replace(/[&<>"']/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]})}escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}getSearchStats(){return{totalPages:this.searchData.length,indexSize:this.searchIndex.size,averageWordsPerPage:this.searchData.reduce((e,t)=>{var a;return e+((null==(a=[t.title,t.description,t.keywords].join(" ").match(/\b\w+\b/g))?void 0:a.length)||0)},0)/this.searchData.length}}}class ContentManager{constructor(){this.contentCache=new Map,this.metadataCache=new Map,this.contentIndex=new Map,this.markedRenderer=this.setupMarkdownRenderer(),this.urlMappings=this.initializeUrlMappings()}initializeUrlMappings(){return{neurology:{"cefaleas-primarias":"headache-management","manejo-de-cefaleas-y-dolor":"headache-management"},dermatology:{"atopic-dermatitis":"atopic-dermatitis"}}}getBasePath(){if(void 0!==import.meta)return console.log("üîç Using Vite BASE_URL: ".concat("/conduct_medicine/")),"/conduct_medicine/";return window.location.pathname.includes("/conduct_medicine/")?(console.log("üîç Detected base path from pathname: /conduct_medicine/"),"/conduct_medicine/"):(console.log("üîç Using default base path: /"),"/")}setupMarkdownRenderer(){marked.setOptions({highlight:function(e,t){return'<pre class="language-'.concat(t,'"><code>').concat(e,"</code></pre>")},breaks:!0,gfm:!0});const e=new marked.Renderer;return e.heading=function(e,t){const a=e.toLowerCase().replace(/[^\w]+/g,"-");return"<h".concat(t,' id="').concat(a,'" class="medical-heading level-').concat(t,'">').concat(e,"</h").concat(t,">")},e.link=function(e,t,a){const n=t?' title="'.concat(t,'"'):"";return e.startsWith("#")||e.startsWith("/")?'<a href="'.concat(e,'"').concat(n,' class="internal-link">').concat(a,"</a>"):'<a href="'.concat(e,'"').concat(n,' target="_blank" rel="noopener noreferrer" class="external-link">').concat(a,"</a>")},e.table=function(e,t){return'<div class="medical-table-wrapper">\n        <table class="medical-table">\n          <thead>'.concat(e,"</thead>\n          <tbody>").concat(t,"</tbody>\n        </table>\n      </div>")},marked.use({renderer:e}),marked}async loadContent(e,t,a=null){const n=a||window.currentLanguage||"en",o=this.mapContentId(e,t),s="".concat(n,"/").concat(e,"/").concat(o);if(this.contentCache.has(s))return this.contentCache.get(s);try{const[a,i]=await Promise.all([this.loadMarkdownContent(e,o,n),this.loadContentMetadata(e,o,n)]),c=await this.processContent(a,i,n);return c.originalContentId=t,c.mappedContentId=o,this.contentCache.set(s,c),c}catch(i){return console.error("Failed to load content ".concat(s,":"),i),this.createErrorContent(e,t,i,n)}}mapContentId(e,t){return this.urlMappings[e]&&this.urlMappings[e][t]?(console.log("Mapping ".concat(e,"/").concat(t," -> ").concat(this.urlMappings[e][t])),this.urlMappings[e][t]):t}async loadMarkdownContent(e,t,a="en"){const n=this.getBasePath(),o="".concat(n,"content/").concat(a,"/markdown/").concat(e,"/").concat(t,".md");console.log("üìÑ Loading markdown from: ".concat(o)),console.log('üîç Base path: "'.concat(n,'"')),console.log('üîç Specialty: "'.concat(e,'", Content ID: "').concat(t,'", Language: "').concat(a,'"'));try{const n=await fetch(o);if(console.log("üìÑ Fetch response status: ".concat(n.status," ").concat(n.statusText)),!n.ok){if(console.warn("‚ùå Failed to fetch markdown: ".concat(n.status," ").concat(n.statusText," for ").concat(o)),"en"!==a)return console.warn("".concat(a," content not found for ").concat(e,"/").concat(t,", falling back to English")),this.loadMarkdownContent(e,t,"en");throw new Error("Markdown not found: ".concat(o," (").concat(n.status," ").concat(n.statusText,")"))}const s=await n.text();return console.log("‚úÖ Successfully loaded markdown content (".concat(s.length," characters)")),s}catch(s){return console.error("‚ùå Error loading markdown for ".concat(e,"/").concat(t,":"),s),console.warn("Markdown content not found for ".concat(e,"/").concat(t,", creating fallback")),this.createFallbackMarkdown(e,t,a)}}async loadContentMetadata(e,t,a="en"){const n=this.getBasePath(),o="".concat(n,"content/").concat(a,"/json/").concat(e,"/").concat(t,".json"),s="metadata-".concat(a,"-").concat(e,"/").concat(t);if(console.log("üìä Loading metadata from: ".concat(o)),this.metadataCache.has(s))return console.log("üíæ Using cached metadata for ".concat(s)),this.metadataCache.get(s);try{const n=await fetch(o);if(console.log("üìä Metadata fetch response status: ".concat(n.status," ").concat(n.statusText)),!n.ok){if(console.warn("‚ùå Failed to fetch metadata: ".concat(n.status," ").concat(n.statusText," for ").concat(o)),"en"!==a)return console.warn("".concat(a," metadata not found for ").concat(e,"/").concat(t,", falling back to English")),this.loadContentMetadata(e,t,"en");throw new Error("Metadata not found: ".concat(o," (").concat(n.status," ").concat(n.statusText,")"))}const i=await n.json();return i.language=a,i.translationStatus=await this.getTranslationStatus(e,t,a),this.metadataCache.set(s,i),i}catch(i){return console.warn("Metadata not found for ".concat(e,"/").concat(t,", using defaults")),this.createDefaultMetadata(e,t,a)}}async processContent(e,t,a="en"){const{content:n,frontmatter:o}=this.parseFrontmatter(e),s={...o,...t},i=this.markedRenderer.parse(n),c=purify.sanitize(i,{ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","p","br","strong","em","u","ul","ol","li","a","table","thead","tbody","tr","th","td","blockquote","code","pre","div","span","mark"],ALLOWED_ATTR:["href","title","class","id","target","rel"]});return{content:this.addMedicalIndicators(c,s),metadata:s,rawMarkdown:n,lastModified:(new Date).toISOString()}}parseFrontmatter(e){const t=e.match(/^---\s*\n([\s\S]*?)\n---\s*\n([\s\S]*)$/);if(!t)return{content:e,frontmatter:{}};try{const e=t[1],a=t[2],n={};return e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const o=e.substring(0,t).trim();let s=e.substring(t+1).trim();if((s.startsWith('"')&&s.endsWith('"')||s.startsWith("'")&&s.endsWith("'"))&&(s=s.slice(1,-1)),s.startsWith("[")&&s.endsWith("]"))try{s=JSON.parse(s)}catch(a){}n[o]=s}}),{content:a,frontmatter:n}}catch(a){return console.warn("Failed to parse frontmatter:",a),{content:e,frontmatter:{}}}}addMedicalIndicators(e,t){if(!t.frequency&&!t.mortality)return e;const a=[];if(t.frequency){const e=this.getFrequencySymbol(t.frequency);a.push('<span class="medical-indicator frequency-'.concat(t.frequency,'" title="Frequency of Consultation: ').concat(t.frequency,'">').concat(e,"</span>"))}if(t.mortality){const e=this.getMortalitySymbol(t.mortality);a.push('<span class="medical-indicator mortality-'.concat(t.mortality,'" title="Mortality Risk: ').concat(t.mortality,'">').concat(e,"</span>"))}if(a.length>0){const t='<div class="medical-indicators">'.concat(a.join(" "),"</div>");return e.replace(/(<h[1-6][^>]*>.*?<\/h[1-6]>)/,"$1".concat(t))}return e}getFrequencySymbol(e){return{high:"F‚ñà",medium:"F‚ñÑ",low:"F‚ñÇ"}[e]||"F?"}getMortalitySymbol(e){return{high:"M‚ñà",medium:"M‚ñÑ",low:"M‚ñÇ"}[e]||"M?"}createFallbackMarkdown(e,t){return"# ".concat(t.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),"\n\nThis is a placeholder for ").concat(e," content: ").concat(t,".\n\nContent will be loaded from the hybrid CMS when available.\n\n## Clinical Information\n- **Specialty**: ").concat(e,"\n- **Content ID**: ").concat(t,"\n- **Status**: Content pending\n\n## Next Steps\n1. Create markdown content file: `content/markdown/").concat(e,"/").concat(t,".md`\n2. Add metadata file: `content/json/").concat(e,"/").concat(t,".json`\n3. Update navigation and search data\n")}createDefaultMetadata(e,t){return{title:t.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),specialty:e,contentId:t,setting:"outpatient",frequency:null,mortality:null,keywords:[e,t],description:"Medical content for ".concat(e,": ").concat(t),lastUpdated:(new Date).toISOString(),author:"JP Silva",status:"draft"}}createErrorContent(e,t,a){return{content:'\n        <div class="error-content">\n          <h2>Content Loading Error</h2>\n          <p>Failed to load content for <strong>'.concat(e,"/").concat(t,'</strong></p>\n          <p class="error-details">Error: ').concat(a.message,'</p>\n          <p><a href="/">‚Üê Return to Home</a></p>\n        </div>\n      '),metadata:this.createDefaultMetadata(e,t),rawMarkdown:"",lastModified:(new Date).toISOString(),error:!0}}async indexContent(e,t,a){const n="".concat(e,"/").concat(t),o={title:a.metadata.title,url:"/specialty/".concat(e,"/").concat(t),description:a.metadata.description,keywords:Array.isArray(a.metadata.keywords)?a.metadata.keywords.join(", "):a.metadata.keywords||"",specialty:e,setting:a.metadata.setting,frequency:a.metadata.frequency,mortality:a.metadata.mortality};return this.contentIndex.set(n,o),o}getAllIndexedContent(){return Array.from(this.contentIndex.values())}getContentBySpecialty(e){return Array.from(this.contentIndex.entries()).filter(([t])=>t.startsWith("".concat(e,"/"))).map(([,e])=>e)}clearCache(e="all"){switch(e){case"content":this.contentCache.clear();break;case"metadata":this.metadataCache.clear();break;case"index":this.contentIndex.clear();break;case"all":this.contentCache.clear(),this.metadataCache.clear(),this.contentIndex.clear()}}getCacheStats(){return{contentCache:this.contentCache.size,metadataCache:this.metadataCache.size,contentIndex:this.contentIndex.size,totalCachedItems:this.contentCache.size+this.metadataCache.size+this.contentIndex.size}}async getTranslationStatus(e,t,a){try{const n=this.getBasePath(),o=await fetch("".concat(n,"content/translation/status/translation-status.json"));if(!o.ok)return null;const s=await o.json(),i="".concat(e,"/").concat(t);if(s.contentStatus&&s.contentStatus[i]){return s.contentStatus[i].languages[a]||null}return null}catch(n){return console.warn("Failed to load translation status:",n),null}}createFallbackMarkdown(e,t,a="en"){const n={en:{title:"".concat(t.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())),content:"This content is currently being developed. Please check back soon.",specialty:e.charAt(0).toUpperCase()+e.slice(1)},es:{title:"".concat(t.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())),content:"Este contenido est√° actualmente en desarrollo. Por favor, vuelva pronto.",specialty:"neurology"===e?"Neurolog√≠a":"dermatology"===e?"Dermatolog√≠a":e}},o=n[a]||n.en;return'---\ntitle: "'.concat(o.title,'"\nspecialty: "').concat(e,'"\nstatus: "under-development"\n---\n\n# ').concat(o.title,"\n\n").concat(o.content,"\n\n---\n\n*").concat(o.specialty," - Conduct Based Medicine*")}createDefaultMetadata(e,t,a="en"){return{title:t.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),specialty:e,contentId:t,setting:"outpatient",frequency:"medium",mortality:"low",keywords:[t.replace(/-/g," ")],description:"Content currently under development",author:"System Generated",lastUpdated:(new Date).toISOString().split("T")[0],status:"under-development",language:a,translationStatus:{status:"pending",autoTranslated:!1,humanReviewRequired:!0}}}createErrorContent(e,t,a,n="en"){const o={en:{title:"Content Loading Error",message:"Failed to load content. Please try again later.",error:"Error"},es:{title:"Error al Cargar Contenido",message:"No se pudo cargar el contenido. Por favor, int√©ntelo m√°s tarde.",error:"Error"}},s=o[n]||o.en;return{content:'<div class="error-content">\n        <h2>'.concat(s.title,"</h2>\n        <p>").concat(s.message,"</p>\n        <details>\n          <summary>").concat(s.error,"</summary>\n          <pre>").concat(a.message,"</pre>\n        </details>\n      </div>"),metadata:this.createDefaultMetadata(e,t,n),error:!0}}getAvailableLanguages(e,t){return["en"]}isContentTranslated(e,t,a){return"en"===a}}const navigationCache=new Map;function clearNavigationCache(){console.log("üßπ Clearing navigation cache..."),navigationCache.clear()}async function getNavigationData(e,t=""){console.log("üìä Getting navigation data for: ".concat(e,' with basePath: "').concat(t,'"'));const a="".concat(e,"-").concat(t);if(navigationCache.has(a))return console.log("‚úÖ Using cached navigation data for ".concat(e)),navigationCache.get(a);try{const n="index"!==e&&e?"navigation-menu-".concat(e,".json"):"navigation-menu-index.json",o="".concat(t,"/assets/data/").concat(n);console.log("üîç Fetching navigation data from: ".concat(o));const s=await fetch(o);if(!s.ok)throw new Error("Failed to fetch navigation data: ".concat(s.status," ").concat(s.statusText));const i=await s.json();return navigationCache.set(a,i),console.log("‚úÖ Successfully loaded navigation data for ".concat(e,":"),i),i}catch(n){throw console.error("‚ùå Failed to load navigation data for ".concat(e,":"),n),n}}const scriptRel="modulepreload",assetsURL=function(e){return"/conduct_medicine/"+e},seen={},__vitePreload=function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=assetsURL(e))in seen)return;seen[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(e,'"]').concat(n)))return;const o=document.createElement("link");return o.rel=t?"stylesheet":scriptRel,t||(o.as="script"),o.crossOrigin="",o.href=e,a&&o.setAttribute("nonce",a),document.head.appendChild(o),t?new Promise((t,a)=>{o.addEventListener("load",t),o.addEventListener("error",()=>a(new Error("Unable to preload CSS for ".concat(e))))}):void 0}))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})};class InteractiveAppManager{constructor(){this.loadedApps=new Map,this.appRegistry=new Map,this.modalContainer=null,this.setupAppRegistry()}setupAppRegistry(){this.appRegistry.set("midas-calculator",{name:"MIDAS Calculator",specialty:"neurology",description:"Migraine Disability Assessment Scale",module:()=>__vitePreload(()=>import("./MidasCalculator-hr8mXpzH.js"),__vite__mapDeps([0,1])),className:"MidasCalculator"}),this.appRegistry.set("easi-calculator",{name:"EASI Calculator",specialty:"dermatology",description:"Eczema Area and Severity Index",module:()=>__vitePreload(()=>import("./EASICalculator-bPRzwWXF.js"),__vite__mapDeps([2,1])),className:"EASICalculator"}),this.appRegistry.set("headache-diary",{name:"Headache Diary",specialty:"neurology",description:"Track headache patterns and triggers",module:null,className:"HeadacheDiary"}),this.appRegistry.set("medication-tracker",{name:"Medication Tracker",specialty:"general",description:"Track medication usage and effectiveness",module:null,className:"MedicationTracker"}),this.appRegistry.set("scorad-assessment",{name:"SCORAD Assessment",specialty:"dermatology",description:"Scoring Atopic Dermatitis",module:null,className:"SCORADAssessment"}),this.appRegistry.set("treatment-selection-guide",{name:"Treatment Selection Guide",specialty:"dermatology",description:"Interactive treatment decision support",module:null,className:"TreatmentSelectionGuide"})}async launchApp(e,t={}){console.log("üöÄ Launching interactive app: ".concat(e));const a=this.appRegistry.get(e);if(!a)throw new Error("Unknown interactive app: ".concat(e));if(a.module)try{const t="modal-".concat(e,"-").concat(Date.now()),n="app-".concat(e,"-").concat(Date.now());this.createModalContainer(t,n,a);const o=(await a.module())[a.className];if(!o)throw new Error("App class ".concat(a.className," not found in module"));const s=new o(n);this.loadedApps.set(t,{instance:s,appId:e,modalId:t,containerId:n}),await s.init(),this.setupModalEventHandlers(t),console.log("‚úÖ Interactive app launched successfully: ".concat(a.name))}catch(n){console.error("‚ùå Failed to launch app ".concat(e,":"),n),this.showErrorModal(a,n)}else this.showComingSoonModal(a)}createModalContainer(e,t,a){const n=document.createElement("div");return n.id=e,n.className="interactive-app-modal fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",n.innerHTML='\n      <div class="modal-content bg-gray-900 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden">\n        <div class="modal-header bg-gray-800 px-6 py-4 border-b border-gray-700 flex justify-between items-center">\n          <div>\n            <h3 class="text-xl font-semibold text-gray-100">'.concat(a.name,'</h3>\n            <p class="text-sm text-gray-400">').concat(a.description,'</p>\n          </div>\n          <button class="modal-close-btn text-gray-400 hover:text-gray-200 text-2xl">√ó</button>\n        </div>\n        <div class="modal-body overflow-auto" style="max-height: calc(90vh - 120px);">\n          <div id="').concat(t,'" class="interactive-app-container p-6"></div>\n        </div>\n      </div>\n    '),document.body.appendChild(n),n}setupModalEventHandlers(e){const t=document.getElementById(e);if(!t)return;const a=t.querySelector(".modal-close-btn"),n=this.loadedApps.get(e);a&&a.addEventListener("click",()=>this.closeApp(e)),t.addEventListener("click",a=>{a.target===t&&this.closeApp(e)});const o=t=>{"Escape"===t.key&&(this.closeApp(e),document.removeEventListener("keydown",o))};if(document.addEventListener("keydown",o),n&&n.instance){const t=document.getElementById(n.containerId);t&&t.addEventListener("app-close",()=>this.closeApp(e))}n&&(n.escapeHandler=o)}closeApp(e){const t=this.loadedApps.get(e);if(!t)return;console.log("üîö Closing interactive app: ".concat(t.appId)),t.instance&&"function"==typeof t.instance.destroy&&t.instance.destroy(),t.escapeHandler&&document.removeEventListener("keydown",t.escapeHandler);const a=document.getElementById(e);a&&a.remove(),this.loadedApps.delete(e)}closeAllApps(){Array.from(this.loadedApps.keys()).forEach(e=>this.closeApp(e))}showComingSoonModal(e){const t=document.createElement("div");t.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",t.innerHTML='\n      <div class="bg-gray-800 p-6 rounded-lg shadow-lg max-w-md mx-4">\n        <h3 class="text-xl font-semibold mb-4 text-gray-100">'.concat(e.name,'</h3>\n        <p class="text-gray-300 mb-4">').concat(e.description,'</p>\n        <div class="bg-blue-900 p-4 rounded mb-4">\n          <p class="text-blue-200 text-sm">\n            üöß This interactive tool is currently under development and will be available in a future update.\n          </p>\n        </div>\n        <div class="flex gap-3">\n          <button class="close-modal bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded transition-colors">\n            Close\n          </button>\n        </div>\n      </div>\n    '),document.body.appendChild(t),t.querySelector(".close-modal").addEventListener("click",()=>t.remove()),t.addEventListener("click",e=>{e.target===t&&t.remove()}),setTimeout(()=>{t.parentNode&&t.remove()},3e3)}showErrorModal(e,t){const a=document.createElement("div");a.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",a.innerHTML='\n      <div class="bg-gray-800 p-6 rounded-lg shadow-lg max-w-md mx-4">\n        <h3 class="text-xl font-semibold mb-4 text-red-400">Error Loading App</h3>\n        <p class="text-gray-300 mb-2">Failed to load: <strong>'.concat(e.name,'</strong></p>\n        <p class="text-sm text-gray-400 mb-4">').concat(t.message,'</p>\n        <button class="close-modal bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded transition-colors">\n          Close\n        </button>\n      </div>\n    '),document.body.appendChild(a),a.querySelector(".close-modal").addEventListener("click",()=>a.remove()),a.addEventListener("click",e=>{e.target===a&&a.remove()})}getAvailableApps(e=null){const t=Array.from(this.appRegistry.entries()).map(([e,t])=>({id:e,...t,available:Boolean(t.module)}));return e?t.filter(t=>t.specialty===e||"general"===t.specialty):t}getAppsBySpecialty(){const e={};return this.appRegistry.forEach((t,a)=>{const n=t.specialty;e[n]||(e[n]=[]),e[n].push({id:a,...t,available:Boolean(t.module)})}),e}isAppLoaded(e){return Array.from(this.loadedApps.values()).some(t=>t.appId===e)}getLoadedApps(){return Array.from(this.loadedApps.values()).map(e=>({modalId:e.modalId,appId:e.appId,containerId:e.containerId}))}addInteractiveAppStyles(){if(document.getElementById("interactive-app-styles"))return;const e=document.createElement("style");e.id="interactive-app-styles",e.textContent="\n      .interactive-app {\n        font-family: inherit;\n        color: inherit;\n      }\n\n      .app-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: flex-start;\n        margin-bottom: 1.5rem;\n        padding-bottom: 1rem;\n        border-bottom: 1px solid #374151;\n      }\n\n      .app-title {\n        font-size: 1.25rem;\n        font-weight: 600;\n        color: #f3f4f6;\n        margin: 0;\n      }\n\n      .app-description {\n        font-size: 0.875rem;\n        color: #9ca3af;\n        margin: 0.5rem 0 0 0;\n      }\n\n      .app-controls {\n        display: flex;\n        gap: 0.5rem;\n      }\n\n      .app-controls button {\n        background: #374151;\n        border: 1px solid #4b5563;\n        color: #d1d5db;\n        width: 2rem;\n        height: 2rem;\n        border-radius: 0.25rem;\n        cursor: pointer;\n        transition: all 0.2s;\n      }\n\n      .app-controls button:hover {\n        background: #4b5563;\n        color: #f3f4f6;\n      }\n\n      .form-field {\n        margin-bottom: 1rem;\n      }\n\n      .form-label {\n        display: block;\n        font-size: 0.875rem;\n        font-weight: 500;\n        color: #d1d5db;\n        margin-bottom: 0.5rem;\n      }\n\n      .form-input, .form-select {\n        width: 100%;\n        padding: 0.5rem;\n        background: #374151;\n        border: 1px solid #4b5563;\n        border-radius: 0.375rem;\n        color: #f3f4f6;\n        font-size: 0.875rem;\n      }\n\n      .form-input:focus, .form-select:focus {\n        outline: none;\n        border-color: #0ea5e9;\n        box-shadow: 0 0 0 1px #0ea5e9;\n      }\n\n      .checkbox-field, .radio-group {\n        margin-bottom: 1rem;\n      }\n\n      .checkbox-label, .radio-label {\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n        cursor: pointer;\n        color: #d1d5db;\n      }\n\n      .form-checkbox, .form-radio {\n        margin: 0;\n      }\n\n      .app-disclaimer {\n        text-align: center;\n        margin-top: 1rem;\n        padding-top: 1rem;\n        border-top: 1px solid #374151;\n      }\n    ",document.head.appendChild(e)}}"undefined"!=typeof window&&(window.interactiveAppManager=new InteractiveAppManager,window.interactiveAppManager.addInteractiveAppStyles());class ConductMedicineApp{constructor(){this.router=new Router,this.componentLoader=new ComponentLoader,this.languageManager=new LanguageManager,this.searchManager=new SearchManager,this.contentManager=new ContentManager,this.isInitialized=!1,this.currentSpecialty=null,this.basePath=this.detectBasePath(),console.log('üîç App initialized with basePath: "'.concat(this.basePath,'"'))}detectBasePath(){const e=window.location.pathname,t=window.location.href;return console.log('üîç Detecting base path from pathname: "'.concat(e,'", href: "').concat(t,'"')),e.includes("/conduct_medicine/")||t.includes("/conduct_medicine/")?"/conduct_medicine":""}async init(){if(!this.isInitialized){console.log("üè• Initializing Conduct Based Medicine SPA...");try{await this.loadPersistentComponents(),await this.languageManager.init(),await this.searchManager.init(),this.setupRouting(),this.initializeInteractions(),this.router.handleRoute(),this.isInitialized=!0,console.log("‚úÖ SPA initialization complete"),window.debugConductMedicine={clearNavigationCache:()=>{clearNavigationCache(),console.log("Navigation cache cleared. Reload a specialty page to see updates.")},reloadCurrentSpecialty:()=>{this.currentSpecialty?(clearNavigationCache(),this.loadSpecialtyNavigation(this.currentSpecialty)):console.log("No current specialty to reload.")},forceRefreshNavigation:()=>{clearNavigationCache();const e=window.fetch;window.fetch=(t,a)=>{if(t.includes("navigation-menu-")){t+="?t="+Date.now()}return e(t,a)},this.currentSpecialty&&this.loadSpecialtyNavigation(this.currentSpecialty),console.log("üîÑ Force refreshed navigation with cache busting")}}}catch(e){console.error("‚ùå Failed to initialize application:",e),this.showErrorMessage("Failed to load application. Please refresh the page.")}}}async loadPersistentComponents(){console.log("Loading persistent components...");const e=await this.componentLoader.loadPartial("partials/_header.html"),t=document.getElementById("header-placeholder");t&&e&&(t.outerHTML=e);const a=await this.componentLoader.loadPartial("partials/_navigation_shell.html"),n=document.getElementById("navigation-shell-placeholder");n&&a&&(n.outerHTML=a);const o=await this.componentLoader.loadPartial("partials/_footer.html"),s=document.getElementById("footer-placeholder");s&&o&&(s.outerHTML=o);const i=await this.componentLoader.loadPartial("partials/_page_overlay.html"),c=document.getElementById("page-overlay-placeholder");c&&i&&(c.outerHTML=i),"undefined"!=typeof lucide&&lucide.createIcons()}setupRouting(){this.router.addRoute("/",()=>this.loadMainPage()),this.router.addRoute("/specialty/:specialty",e=>this.loadSpecialtyPage(e.specialty)),this.router.addRoute("/specialty/:specialty/:page",e=>this.loadSpecialtyContent(e.specialty,e.page)),this.router.addRoute("/tools/:tool",e=>this.loadInteractiveTool(e.tool)),window.addEventListener("popstate",()=>this.router.handleRoute()),document.addEventListener("click",e=>{const t=e.target.closest("a[href]");t&&"nav-link-invite-coffee"!==t.id&&!t.closest('[data-modal="support"]')&&!e.target.closest(".nav-category-title")&&this.shouldHandleInternally(t.href)&&(e.preventDefault(),this.router.navigate(t.getAttribute("href")))})}shouldHandleInternally(e){return new URL(e,window.location.origin).origin===window.location.origin&&!e.startsWith("#")&&!e.startsWith("mailto:")&&!e.startsWith("tel:")}async loadMainPage(){console.log("Loading main page..."),this.currentSpecialty=null,delete window.generalNavInitialized,delete window.neurologyNavInitialized,delete window.dermatologyNavInitialized;const e=document.querySelector(".actual-main-content");e&&!e.innerHTML.includes("Medical Specialties")&&(console.log("Loading fallback main page content..."),e.innerHTML='\n        <h2 id="main-content-header" class="text-2xl font-semibold mb-4 text-gray-100">\n          Welcome to Conduct Based Medicine\n        </h2>\n        <p class="mb-4">\n          Advanced medical education platform with evidence-based clinical decision support for healthcare professionals. \n          Features interactive tools, presentations, and comprehensive specialty content organized by clinical settings.\n        </p>\n        <p class="mb-4">\n          Navigate using the menu on the left or explore our medical specialties below.\n        </p>\n        \n        \x3c!-- Medical Specialties Grid --\x3e\n        <div class="bg-gray-800 p-6 rounded-lg shadow-lg mb-6">\n          <h3 class="text-xl font-semibold mb-4 text-sky-400">\n            Medical Specialties\n          </h3>\n          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4">\n            <a href="/specialty/neurology" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">üß† Neurology</h4>\n              <p class="text-sm text-gray-300">Neurological disorders and brain-related conditions</p>\n            </a>\n            <a href="/specialty/dermatology" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">üß¥ Dermatology</h4>\n              <p class="text-sm text-gray-300">Skin conditions and dermatologic diseases</p>\n            </a>\n            <a href="/specialty/cardiology" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">ü´Ä Cardiology</h4>\n              <p class="text-sm text-gray-300">Cardiovascular diseases and heart conditions</p>\n            </a>\n            <a href="/specialty/internal_medicine" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">üè• Internal Medicine</h4>\n              <p class="text-sm text-gray-300">Comprehensive adult medical care</p>\n            </a>\n            <a href="/specialty/gastroenterology" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">ü´Ä Gastroenterology</h4>\n              <p class="text-sm text-gray-300">Digestive system and liver diseases</p>\n            </a>\n            <a href="/specialty/pulmonology" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">ü´Å Pulmonology</h4>\n              <p class="text-sm text-gray-300">Respiratory diseases and lung conditions</p>\n            </a>\n            <a href="/specialty/endocrinology" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">üß¨ Endocrinology</h4>\n              <p class="text-sm text-gray-300">Hormone disorders and metabolic conditions</p>\n            </a>\n            <a href="/specialty/nephrology" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">ü´ò Nephrology</h4>\n              <p class="text-sm text-gray-300">Kidney diseases and renal disorders</p>\n            </a>\n            <a href="/specialty/hematology" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">ü©∏ Hematology</h4>\n              <p class="text-sm text-gray-300">Blood disorders and hematologic conditions</p>\n            </a>\n            <a href="/specialty/rheumatology" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">ü¶¥ Rheumatology</h4>\n              <p class="text-sm text-gray-300">Autoimmune and joint diseases</p>\n            </a>\n            <a href="/specialty/infectious_disease" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">ü¶† Infectious Disease</h4>\n              <p class="text-sm text-gray-300">Infectious diseases and antimicrobial therapy</p>\n            </a>\n            <a href="/specialty/psychiatry" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">üß† Psychiatry</h4>\n              <p class="text-sm text-gray-300">Mental health and psychiatric disorders</p>\n            </a>\n            <a href="/specialty/allergy_immunology" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">ü§ß Allergy & Immunology</h4>\n              <p class="text-sm text-gray-300">Allergic diseases and immune disorders</p>\n            </a>\n            <a href="/specialty/gynecology" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">üë© Gynecology</h4>\n              <p class="text-sm text-gray-300">Women\'s reproductive health</p>\n            </a>\n            <a href="/specialty/urology" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">ü´ò Urology</h4>\n              <p class="text-sm text-gray-300">Urologic conditions and male health</p>\n            </a>\n            <a href="/specialty/pediatrics" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">üë∂ Pediatrics</h4>\n              <p class="text-sm text-gray-300">Children\'s health and pediatric medicine</p>\n            </a>\n            <a href="/specialty/physical_medicine" class="specialty-card bg-gray-700 p-4 rounded-lg hover:bg-gray-600 transition-colors">\n              <h4 class="font-semibold text-blue-400 mb-2">üèÉ Physical Medicine & Rehabilitation</h4>\n              <p class="text-sm text-gray-300">Rehabilitation and functional medicine</p>\n            </a>\n          </div>\n        </div>\n        \n        \x3c!-- Clinical Organization --\x3e\n        <div class="bg-gray-800 p-6 rounded-lg shadow-lg">\n          <h3 class="text-xl font-semibold mb-3 text-sky-400">\n            Evidence-Based Clinical Organization\n          </h3>\n          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">\n            <div class="bg-gray-700 p-4 rounded-lg">\n              <h4 class="font-semibold text-green-400 mb-2">üè• Outpatient Setting</h4>\n              <p class="text-sm text-gray-300">Routine care, screening, preventive medicine, and chronic condition management</p>\n            </div>\n            <div class="bg-gray-700 p-4 rounded-lg">\n              <h4 class="font-semibold text-yellow-400 mb-2">üö® Emergency Room</h4>\n              <p class="text-sm text-gray-300">Acute presentations, urgent conditions, and emergency medical care</p>\n            </div>\n            <div class="bg-gray-700 p-4 rounded-lg">\n              <h4 class="font-semibold text-red-400 mb-2">üè® Hospitalization</h4>\n              <p class="text-sm text-gray-300">Complex cases, inpatient management, and specialized medical care</p>\n            </div>\n          </div>\n          <div class="mt-4 p-4 bg-gray-700 rounded-lg">\n            <h4 class="font-semibold text-sky-400 mb-2">üìä Frequency & Mortality Indicators</h4>\n            <p class="text-sm text-gray-300 mb-2">Each condition includes evidence-based indicators:</p>\n            <div class="flex flex-wrap gap-4 text-xs">\n              <span class="text-gray-400"><strong>F‚ñà/F‚ñÑ/F‚ñÇ</strong> Consultation Frequency (High/Medium/Low)</span>\n              <span class="text-gray-400"><strong>M‚ñà/M‚ñÑ/M‚ñÇ</strong> Mortality Risk (High/Medium/Low)</span>\n            </div>\n          </div>\n        </div>\n      ');const t=document.querySelector(".site-navigation-panel");t?(console.log("üîÑ Clearing navigation panel for home page"),t.innerHTML='<div class="loading-nav">Loading navigation...</div>'):console.warn("‚ö†Ô∏è Navigation panel not found when trying to clear it"),await this.loadGeneralNavigation(),this.loadMainPresentation()}async loadSpecialtyPage(e){console.log("Loading ".concat(e," specialty page...")),this.currentSpecialty=e,await this.loadSpecialtyNavigation(e);const t=document.querySelector(".actual-main-content");t&&(t.innerHTML='\n        <h2 id="main-content-header" class="text-2xl font-semibold mb-4 text-gray-100">\n          Welcome to '.concat(e.charAt(0).toUpperCase()+e.slice(1),'\n        </h2>\n        <p class="mb-4">\n          Comprehensive ').concat(e,' conditions organized by clinical setting and frequency.\n        </p>\n        <div class="bg-gray-800 p-6 rounded-lg shadow-lg">\n          <h3 class="text-xl font-semibold mb-3 text-sky-400">\n            Clinical Settings\n          </h3>\n          <div class="grid md:grid-cols-3 gap-4">\n            <div class="bg-gray-700 p-4 rounded">\n              <h4 class="font-semibold mb-2">Outpatient</h4>\n              <p class="text-sm text-gray-300">Common conditions seen in clinical practice.</p>\n            </div>\n            <div class="bg-gray-700 p-4 rounded">\n              <h4 class="font-semibold mb-2">Emergency Room</h4>\n              <p class="text-sm text-gray-300">Acute presentations requiring immediate care.</p>\n            </div>\n            <div class="bg-gray-700 p-4 rounded">\n              <h4 class="font-semibold mb-2">Hospitalization</h4>\n              <p class="text-sm text-gray-300">Complex cases requiring inpatient management.</p>\n            </div>\n          </div>\n        </div>\n      ')),this.loadSpecialtyPresentation(e)}async loadSpecialtyNavigation(e){var t;console.log("üß† Loading ".concat(e," navigation directly..."));try{const a=document.querySelector(".site-navigation-panel");if(!a)return void console.error("‚ùå Navigation panel not found");const n=this.basePath;"".concat(n,"/assets/data/navigation-menu-").concat(e,".json");console.log("üîç Loading ".concat(e,' navigation with basePath: "').concat(n,'"')),console.log("üìç Loading navigation data for: ".concat(e));const o=await getNavigationData(e,n),s=window.currentLanguage||"en",i=o.ui_strings&&o.ui_strings[s]||(null==(t=o.ui_strings)?void 0:t.en)||{};if(!Array.isArray(o.sections)||0===o.sections.length)throw new Error("Invalid navigation data");console.log("üß† Building ".concat(e," navigation..."));let c="";o.sections.forEach(e=>{let t="",a=e.id;if(e.title){const n=e.title,o=n[s]||n.en||"";if(!a&&n.en&&(a=this.generateSafeId(n.en)),e.historicalFigure){const a=e.historicalFigure,n=i.charcotImageAlt||a.name,s=i.charcotImageTitle||"Learn more about ".concat(a.name);t="\n              <span>".concat(this.escapeHTML(o),'</span>\n              <a href="').concat(a.wikipediaUrl,'" target="_blank" rel="noopener noreferrer" title="').concat(this.escapeHTML(s),'" class="inline-block ml-2">\n                <img src="').concat(a.imageUrl,'" alt="').concat(this.escapeHTML(n),'" class="w-8 h-8 rounded-full object-cover border border-gray-400 hover:border-sky-500 transition-all duration-200 ease-in-out align-middle">\n              </a>\n            ')}else t=this.escapeHTML(o);c+='<h3 id="'.concat(a||this.generateSafeId("section-title"),'" class="mt-6 first:mt-0 flex items-center">').concat(t,"</h3>")}Array.isArray(e.items)&&(c+="<ul>",e.items.forEach(e=>{const t=e.label,a=t[s]||t.en||"";let n=e.id;if(!n&&t.en?n=this.generateSafeId(t.en):n||(n=this.generateSafeId("nav-item")),e.subItems&&e.subItems.length>0){const t="submenu-".concat(n);c+='<li class="nav-category">',c+='<div class="nav-category-title" role="button" tabindex="0" aria-expanded="false" aria-controls="'.concat(t,'">\n                            <span>').concat(this.escapeHTML(a),'</span>\n                            <i data-lucide="chevron-right" class="lucide-chevron-right"></i>\n                          </div>'),c+='<ul id="'.concat(t,'">'),e.subItems.forEach(e=>{const t=e.label,a=t[s]||t.en||"";let n=e.id;!n&&t.en?n=this.generateSafeId(t.en):n||(n=this.generateSafeId("nav-subitem")),c+='<li><a id="'.concat(n,'" href="').concat(this.escapeHTML(e.url),'">').concat(this.escapeHTML(a),"</a></li>")}),c+="</ul>",c+="</li>"}else c+='<li><a id="'.concat(n,'" href="').concat(this.escapeHTML(e.url),'">').concat(this.escapeHTML(a),"</a></li>")}),c+="</ul>")});const r='\n        <div class="nav-legend">\n          <h4 class="text-sm font-semibold text-gray-200 mb-2">'.concat(this.escapeHTML(i.legendTitle||"Symbol Legend:"),'</h4>\n          <div class="legend-section mb-2">\n            <p class="text-xs text-gray-400 mb-1"><strong>FC</strong> (').concat(this.escapeHTML(i.legendFC||"Frequency of Consultation"),'):</p>\n            <ul class="text-xs text-gray-400">\n              <li class="flex items-center mb-0.5"><span class="symbol-legend-item">F‚ñà</span> ').concat(this.escapeHTML(i.legendHigh||"High"),'</li>\n              <li class="flex items-center mb-0.5"><span class="symbol-legend-item">F‚ñÑ</span> ').concat(this.escapeHTML(i.legendMedium||"Medium"),'</li>\n              <li class="flex items-center"><span class="symbol-legend-item">F‚ñÇ</span> ').concat(this.escapeHTML(i.legendLow||"Low"),'</li>\n            </ul>\n          </div>\n          <div class="legend-section">\n            <p class="text-xs text-gray-400 mb-1"><strong>MA</strong> (').concat(this.escapeHTML(i.legendMA||"Mortality Associated"),'):</p>\n            <ul class="text-xs text-gray-400">\n              <li class="flex items-center mb-0.5"><span class="symbol-legend-item">M‚ñà</span> ').concat(this.escapeHTML(i.legendHigh||"High"),'</li>\n              <li class="flex items-center mb-0.5"><span class="symbol-legend-item">M‚ñÑ</span> ').concat(this.escapeHTML(i.legendMedium||"Medium"),'</li>\n              <li class="flex items-center"><span class="symbol-legend-item">M‚ñÇ</span> ').concat(this.escapeHTML(i.legendLow||"Low"),'</li>\n            </ul>\n          </div>\n          <p class="text-xs text-gray-500 italic mt-2">').concat(this.escapeHTML(i.legendIndicators||"(Indicators appear if data is available)"),"</p>\n        </div>\n      ");c+=r,console.log("üß† Setting navigation HTML for ".concat(e,", length:"),c.length),a.innerHTML=c,"undefined"!=typeof lucide&&lucide.createIcons({context:a}),this.attachNavigationEventListeners(a);const l=a.querySelectorAll(".nav-category-title");console.log("üß† Found ".concat(l.length," expandable categories for ").concat(e)),l.forEach((e,t)=>{console.log("üß† Category ".concat(t+1,":"),e.textContent.trim());const a=e.closest(".nav-category"),n=e.nextElementSibling;console.log("   ‚îî‚îÄ‚îÄ Structure check - categoryLi: ".concat(!!a,", subMenu: ").concat(!!n))}),console.log("‚úÖ Successfully loaded ".concat(e," navigation with ").concat(l.length," expandable sections"))}catch(a){console.error("‚ùå Failed to load ".concat(e," navigation:"),a),this.createBasicNavigation()}}async loadGeneralNavigation(){try{const e=document.querySelector(".site-navigation-panel");if(!e)return console.warn("Navigation panel not found"),void this.createBasicNavigation();e.innerHTML='<div class="loading-nav">Loading navigation...</div>';const t=this.basePath;"".concat(t,"/assets/data/navigation-menu-index.json");console.log('üîç Loading general navigation with basePath: "'.concat(t,'"'));const a=await getNavigationData("index",t),n=Array.isArray(a)?a:a.sections||[];if(!Array.isArray(n)||0===n.length)throw new Error("Invalid navigation data");const o=window.currentLanguage||"en";let s="";n.forEach(e=>{const t=e.id||this.generateSafeId("object"==typeof e.title?e.title.en:e.title),a="object"==typeof e.title?e.title[o]||e.title.en||"":e.title;s+='<h3 id="'.concat(t,'" class="mt-6 first:mt-0">').concat(this.escapeHTML(a),"</h3><ul>"),Array.isArray(e.items)&&e.items.forEach(e=>{const t="object"==typeof e.label?e.label[o]||e.label.en||"":e.label;if(e.subItems&&e.subItems.length>0){const a="submenu-".concat(e.id||this.generateSafeId(t));s+='<li class="nav-category">',s+='<div class="nav-category-title" role="button" tabindex="0" aria-expanded="false" aria-controls="'.concat(a,'">\n                            <span>').concat(this.escapeHTML(t),'</span>\n                            <i data-lucide="chevron-right" class="lucide-chevron-right"></i>\n                          </div>'),s+='<ul id="'.concat(a,'">'),e.subItems.forEach(e=>{const t="object"==typeof e.label?e.label[o]||e.label.en||"":e.label;s+='<li><a id="'.concat(e.id||"",'" href="').concat(this.escapeHTML(e.url),'">').concat(this.escapeHTML(t),"</a></li>")}),s+="</ul>",s+="</li>"}else s+='<li><a id="'.concat(e.id||"",'" href="').concat(this.escapeHTML(e.url),'">').concat(this.escapeHTML(t),"</a></li>")}),s+="</ul>"}),e.innerHTML=s,"undefined"!=typeof lucide&&lucide.createIcons({context:e}),this.attachNavigationEventListeners(e)}catch(e){console.error("Error building navigation directly:",e),this.createBasicNavigation()}}attachNavigationEventListeners(e){console.log("üîß Attaching navigation event listeners to panel:",e),this.handleNavigationClick&&e.removeEventListener("click",this.handleNavigationClick),this.handleNavigationKeydown&&e.removeEventListener("keydown",this.handleNavigationKeydown),this.handleNavigationClick=e=>{console.log("üñ±Ô∏è Navigation panel clicked, target:",e.target);const t=e.target.closest(".nav-category-title");t?(e.preventDefault(),e.stopPropagation(),console.log("‚úÖ Found .nav-category-title element:",t.textContent.trim()),this.toggleNavigationCategory(t)):console.log("‚ÑπÔ∏è Click was not on a .nav-category-title element")},this.handleNavigationKeydown=e=>{if("Enter"===e.key||" "===e.key){const t=e.target.closest(".nav-category-title");t&&(e.preventDefault(),console.log("‚å®Ô∏è Keyboard activation on category:",t.textContent.trim()),this.toggleNavigationCategory(t))}},e.addEventListener("click",this.handleNavigationClick),e.addEventListener("keydown",this.handleNavigationKeydown),console.log("‚úÖ Navigation event listeners attached successfully")}toggleNavigationCategory(e){console.log("üîÑ Toggling navigation category:",e.textContent.trim());const t=e.closest(".nav-category"),a=e.nextElementSibling,n=e.querySelector("i[data-lucide]");if(console.log("üîç Elements found - categoryLi:",t,"subMenu:",a,"icon:",n),console.log("üîç Title element HTML:",e.outerHTML),!t||!a)return void console.error("‚ùå Missing required elements for navigation toggle");const o="true"===e.getAttribute("aria-expanded");if(console.log("üìã Current state: ".concat(o?"expanded":"collapsed"," ‚Üí ").concat(o?"collapsed":"expanded")),t.classList.toggle("open"),e.setAttribute("aria-expanded",String(!o)),n){const e=o?"chevron-right":"chevron-down";n.innerHTML="",n.setAttribute("data-lucide",e),console.log("üîÑ Icon changed to: ".concat(e)),"undefined"!=typeof lucide?lucide.createIcons({elements:[n]}):console.warn("‚ö†Ô∏è Lucide icons not available")}else console.warn("‚ö†Ô∏è No icon found to toggle");console.log("‚úÖ Navigation category toggle completed")}escapeHTML(e){return"string"!=typeof e?"":e.replace(/[&<>"']/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]})}generateSafeId(e){return"string"!=typeof e?"nav-item":e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}createBasicNavigation(){const e=document.querySelector(".site-navigation-panel");e&&(e.innerHTML='\n      <nav class="basic-navigation">\n        <h3 class="text-lg font-semibold text-gray-200 mb-4">Medical Specialties</h3>\n        <ul class="space-y-2">\n          <li>\n            <a href="/specialty/neurology" class="block p-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded transition-colors">\n              üß† Neurology\n            </a>\n          </li>\n          <li>\n            <a href="/specialty/dermatology" class="block p-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded transition-colors">\n              ü©∫ Dermatology\n            </a>\n          </li>\n        </ul>\n        \n        <div class="mt-8">\n          <h4 class="text-sm font-semibold text-gray-300 mb-2">Sample Content</h4>\n          <ul class="space-y-1 text-sm">\n            <li>\n              <a href="/specialty/neurology/headache-management" class="block p-1 text-gray-400 hover:text-sky-400 transition-colors">\n                Headache Management\n              </a>\n            </li>\n            <li>\n              <a href="/specialty/dermatology/atopic-dermatitis" class="block p-1 text-gray-400 hover:text-sky-400 transition-colors">\n                Atopic Dermatitis\n              </a>\n            </li>\n          </ul>\n        </div>\n        \n        <div class="mt-8 p-3 bg-gray-800 rounded text-sm text-gray-400">\n          <p>üìù Navigation system loading...</p>\n          <p>This is a basic fallback menu.</p>\n        </div>\n      </nav>\n    ',console.log("üìã Created basic navigation fallback"))}loadMainPresentation(){const e=document.querySelector(".presentation-area-wrapper[data-presentation-src]");e&&"function"==typeof loadAndInitializeReveal?(console.log("üé¨ Loading main page presentation..."),loadAndInitializeReveal()):e&&console.warn("‚ö†Ô∏è Presentation wrapper found but loadAndInitializeReveal function not available")}loadSpecialtyPresentation(e){console.log("üé¨ Skipping presentation reload for specialty: ".concat(e))}async loadSpecialtyContent(e,t){console.log("Loading ".concat(e,"/").concat(t," content...")),this.currentSpecialty=e,await this.loadSpecialtyNavigation(e);const a=document.querySelector(".actual-main-content");if(a){a.innerHTML='\n      <div class="loading-content">\n        <h2 class="text-2xl font-semibold mb-4 text-gray-100">Loading...</h2>\n        <p>Loading '.concat(e," content: ").concat(t,"...</p>\n      </div>\n    ");try{const n=window.currentLanguage||"en",o=await this.contentManager.loadContent(e,t,n);if(o.error)return void(a.innerHTML=o.content);const s='\n        <article class="medical-content-with-sidebar">\n          <header class="content-header">\n            <div class="breadcrumb text-sm text-gray-400 mb-2">\n              <a href="/specialty/'.concat(e,'" class="hover:text-sky-400">').concat(e.charAt(0).toUpperCase()+e.slice(1),'</a>\n              <span class="mx-2">‚Ä∫</span>\n              <span>').concat(o.metadata.title,'</span>\n            </div>\n            <h1 class="text-2xl font-bold mb-2 text-gray-100">').concat(o.metadata.title,'</h1>\n            <div class="content-meta">\n              <span class="specialty-tag">').concat(o.metadata.specialty,'</span>\n              <span class="setting-tag">').concat(o.metadata.setting,"</span>\n              ").concat(o.metadata.frequency?'<span class="frequency-indicator">'.concat(this.contentManager.getFrequencySymbol(o.metadata.frequency),"</span>"):"","\n              ").concat(o.metadata.mortality?'<span class="mortality-indicator">'.concat(this.contentManager.getMortalitySymbol(o.metadata.mortality),"</span>"):"","\n              ").concat(this.generateLanguageIndicators(o.metadata,n),"\n            </div>\n            ").concat(o.metadata.lastUpdated?'<p class="text-xs text-gray-400 mt-2">Last updated: '.concat(new Date(o.metadata.lastUpdated).toLocaleDateString(),"</p>"):"","\n            ").concat(this.generateTranslationStatus(o.metadata),'\n          </header>\n          <div class="content-body">\n            ').concat(o.content,"\n          </div>\n          ").concat(o.metadata.interactiveTools&&o.metadata.interactiveTools.length>0?this.renderInteractiveTools(o.metadata.interactiveTools):"","\n          ").concat(o.metadata.relatedContent&&o.metadata.relatedContent.length>0?this.renderRelatedContent(o.metadata.relatedContent,e):"","\n        </article>\n      ");a.innerHTML=s,this.initializeContentInteractions(),await this.contentManager.indexContent(e,t,o),this.updateActiveNavigation("/specialty/".concat(e,"/").concat(t))}catch(n){console.error("Failed to load ".concat(e,"/").concat(t,":"),n),a.innerHTML='\n        <div class="error-content">\n          <h2 class="text-xl font-semibold mb-4 text-red-400">Error Loading Content</h2>\n          <p>Failed to load '.concat(e,": ").concat(t,'</p>\n          <p class="text-sm text-gray-400 mt-2">').concat(n.message,'</p>\n          <a href="/specialty/').concat(e,'" class="text-sky-400 hover:text-sky-300 mt-4 inline-block">‚Üê Back to ').concat(e,"</a>\n        </div>\n      ")}}}updateActiveNavigation(e){document.querySelectorAll(".nav-link-active, .nav-category-active").forEach(e=>{e.classList.remove("nav-link-active","nav-category-active")});document.querySelectorAll(".site-navigation-panel a[href]").forEach(t=>{const a=t.getAttribute("href");if(a===e||e.endsWith(a)){t.classList.add("nav-link-active");const e=t.closest(".nav-category");if(e){e.classList.add("nav-category-active");const t=e.querySelector(".nav-category-title");t&&(t.setAttribute("aria-expanded","true"),e.classList.add("open"))}}})}renderInteractiveTools(e){return'\n      <section class="interactive-tools mt-8">\n        <h3 class="text-xl font-semibold mb-4 text-sky-400">Interactive Tools</h3>\n        <div class="tools-grid grid md:grid-cols-2 lg:grid-cols-3 gap-4">\n          '.concat(e.map(e=>'\n            <div class="tool-card bg-gray-700 p-4 rounded-lg">\n              <h4 class="font-semibold mb-2">'.concat(e.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),'</h4>\n              <button class="launch-tool bg-sky-600 hover:bg-sky-700 text-white px-3 py-1 rounded text-sm" data-tool="').concat(e,'">\n                Launch Tool\n              </button>\n            </div>\n          ')).join(""),"\n        </div>\n      </section>\n    ")}renderRelatedContent(e,t){return'\n      <section class="related-content mt-8">\n        <h3 class="text-xl font-semibold mb-4 text-sky-400">Related Content</h3>\n        <div class="related-links grid md:grid-cols-2 gap-3">\n          '.concat(e.map(e=>'\n            <a href="/specialty/'.concat(t,"/").concat(e,'" class="related-link block p-3 bg-gray-700 rounded hover:bg-gray-600 transition-colors">\n              ').concat(e.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),"\n            </a>\n          ")).join(""),"\n        </div>\n      </section>\n    ")}initializeContentInteractions(){document.querySelectorAll(".launch-tool").forEach(e=>{e.addEventListener("click",e=>{const t=e.target.getAttribute("data-tool");this.launchInteractiveTool(t)})})}async launchInteractiveTool(e){if(console.log("Launching interactive tool: ".concat(e)),window.interactiveAppManager)try{await window.interactiveAppManager.launchApp(e)}catch(t){console.error("Failed to launch ".concat(e,":"),t),this.showModal('\n          <div class="tool-modal">\n            <h3 class="text-xl font-semibold mb-4 text-red-400">Error</h3>\n            <p>Failed to launch interactive tool: '.concat(e,'</p>\n            <p class="text-sm text-gray-400 mt-2">').concat(t.message,"</p>\n          </div>\n        "))}else this.showModal('\n        <div class="tool-modal">\n          <h3 class="text-xl font-semibold mb-4">Interactive Tool: '.concat(e,"</h3>\n          <p>Interactive app manager not available.</p>\n        </div>\n      "))}showModal(e){const t=document.createElement("div");t.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",t.innerHTML='\n      <div class="bg-gray-800 p-6 rounded-lg shadow-lg max-w-2xl mx-4 max-h-[80vh] overflow-auto">\n        '.concat(e,'\n        <button class="close-modal bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded mt-4">\n          Close\n        </button>\n      </div>\n    '),document.body.appendChild(t),t.querySelector(".close-modal").addEventListener("click",()=>t.remove()),t.addEventListener("click",e=>{e.target===t&&t.remove()}),t.querySelector(".coffee-btn").addEventListener("click",()=>{window.open("https://ko-fi.com/conductmedicine","_blank")})}async loadInteractiveTool(e){console.log("Loading interactive tool: ".concat(e));const t=document.querySelector(".actual-main-content");t&&(t.innerHTML='\n        <h2 class="text-2xl font-semibold mb-4 text-gray-100">Interactive Tool: '.concat(e,"</h2>\n        <p>Interactive medical tool will be loaded here.</p>\n      "))}initializeInteractions(){this.setupMobileNavigation(),this.setupLanguageSwitcher(),this.setupSearchInteractions(),this.setupModalSystem()}setupMobileNavigation(){const e=document.getElementById("mobile-nav-toggle"),t=document.querySelector(".site-navigation-panel"),a=document.getElementById("page-overlay");e&&t&&a&&(e.addEventListener("click",()=>{t.classList.contains("mobile-nav-is-open")?(t.classList.remove("mobile-nav-is-open"),a.classList.remove("is-visible"),document.body.classList.remove("mobile-nav-active")):(t.classList.add("mobile-nav-is-open"),a.classList.add("is-visible"),document.body.classList.add("mobile-nav-active"))}),a.addEventListener("click",()=>{t.classList.remove("mobile-nav-is-open"),a.classList.remove("is-visible"),document.body.classList.remove("mobile-nav-active")}))}setupLanguageSwitcher(){const e=document.getElementById("translate-button");e&&e.addEventListener("click",()=>{this.languageManager.toggleLanguage()})}setupSearchInteractions(){document.addEventListener("keydown",e=>{if((e.ctrlKey||e.metaKey)&&"k"===e.key){e.preventDefault();const t=document.getElementById("search-input");t&&(t.focus(),t.select())}})}async reloadCurrentSpecialtyNavigation(){this.currentSpecialty?(console.log("üåç Reloading ".concat(this.currentSpecialty," navigation for language change")),await this.loadSpecialtyNavigation(this.currentSpecialty)):(console.log("üåç Reloading home page navigation for language change"),await this.loadGeneralNavigation())}setupModalSystem(){document.addEventListener("click",e=>{(e.target.closest('[data-modal="support"]')||e.target.closest("#nav-link-invite-coffee"))&&(e.preventDefault(),e.stopPropagation(),this.showSupportModal())})}showSupportModal(){const e=document.createElement("div");e.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",e.innerHTML='\n      <div class="bg-gray-800 p-6 rounded-lg shadow-lg max-w-md mx-4">\n        <h3 class="text-xl font-semibold mb-4 text-gray-100">Support Our Medical Education Platform</h3>\n        <p class="text-gray-300 mb-4">Help us maintain and expand this clinical decision support tool.</p>\n        <div class="flex gap-3">\n          <button class="coffee-btn bg-sky-600 hover:bg-sky-700 text-white px-4 py-2 rounded transition-colors">\n            ‚òï Buy me a coffee\n          </button>\n          <button class="close-modal bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded transition-colors">\n            Close\n          </button>\n        </div>\n      </div>\n    ',document.body.appendChild(e),e.querySelector(".close-modal").addEventListener("click",()=>e.remove()),e.addEventListener("click",t=>{t.target===e&&e.remove()}),e.querySelector(".coffee-btn").addEventListener("click",()=>{window.open("https://ko-fi.com/conductmedicine","_blank")})}showErrorMessage(e){const t=document.createElement("div");t.className="fixed top-4 right-4 bg-red-600 text-white p-4 rounded shadow-lg z-50",t.textContent=e,document.body.appendChild(t),setTimeout(()=>t.remove(),5e3)}generateLanguageIndicators(e,t){let a="";return["en","es"].forEach(n=>{const o=n===t,s="en"===n?"üá∫üá∏":"üá™üá∏",i="en"===n?"English":"Espa√±ol";if("en"===n||e.translationStatus&&"pending"!==e.translationStatus.status){const e=o?"language-indicator active":"language-indicator",t=o?"Currently viewing in ".concat(i):"Switch to ".concat(i);a+='<span class="'.concat(e,'" title="').concat(t,'" data-lang="').concat(n,'">').concat(s,"</span>")}else a+='<span class="language-indicator unavailable" title="Not available in '.concat(i,'">‚ö™</span>')}),a}generateTranslationStatus(e){if(!e.translationStatus||"en"===e.language)return"";const t=e.translationStatus;let a="";return"auto-translated"===t.status?a='\n        <div class="translation-status mt-2 p-2 bg-yellow-900/30 border border-yellow-600/50 rounded text-sm">\n          <div class="flex items-center gap-2 text-yellow-400">\n            <span>ü§ñ</span>\n            <span>Auto-translated content</span>\n          </div>\n          <p class="text-xs text-yellow-300 mt-1">\n            This content has been automatically translated and requires medical professional review.\n            Treatment protocols and dosages should be verified before clinical use.\n          </p>\n        </div>\n      ':"human-reviewed"===t.status?a='\n        <div class="translation-status mt-2 p-2 bg-green-900/30 border border-green-600/50 rounded text-sm">\n          <div class="flex items-center gap-2 text-green-400">\n            <span>‚úÖ</span>\n            <span>Medically reviewed translation</span>\n          </div>\n          <p class="text-xs text-green-300 mt-1">\n            Reviewed by: '.concat(t.reviewedBy||"Medical professional"," on ").concat(t.lastUpdated,"\n          </p>\n        </div>\n      "):"pending"===t.status&&(a='\n        <div class="translation-status mt-2 p-2 bg-gray-900/30 border border-gray-600/50 rounded text-sm">\n          <div class="flex items-center gap-2 text-gray-400">\n            <span>‚è≥</span>\n            <span>Translation in progress</span>\n          </div>\n        </div>\n      '),a}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.app=new ConductMedicineApp,window.app.init()}):(window.app=new ConductMedicineApp,window.app.init());export{__vite_legacy_guard};
//# sourceMappingURL=index-KN_lZoVm.js.map
